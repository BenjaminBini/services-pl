extends /layouts/layout

block content
    .flex 
        .flex-col.flex-grow
            .-my-2.py-2.overflow-x-auto(class="sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8")
                .align-middle.inline-block.min-w-full.shadow.overflow-hidden.border-b.border-gray-200(class="sm:rounded-lg")
                    .bg-white.px-4.py-5.border-b.border-gray-200(class="sm:px-6")
                        .-ml-4.-mt-4.flex.justify-between.items-center.flex-wrap(class="sm:flex-no-wrap")
                            .ml-4.mt-4
                                h3.text-lg.leading-6.font-medium.text-gray-900
                                    | Relais routiers
                                p.mt-1.text-sm.leading-5.text-gray-500
                                    | #{page.getTotalElements()} résultats
                            .mt-4.flex(class="md:mt-0 md:ml-4")

                                .relative.ml-3.inline-block.text-left(x-data="{ open: false }" @keydown.window.escape="open = false" @click.away="open = false")
                                    div
                                        span.rounded-md.shadow-sm
                                            button.inline-flex.justify-center.w-full.rounded-md.border.border-gray-300.px-4.py-2.bg-white.text-sm.leading-5.font-medium.text-gray-700.transition.ease-in-out.duration-150(@click="open = !open" type="button" class="hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800")
                                                | Tri par&nbsp;
                                                if sort == 'id'
                                                    | id
                                                else if sort == 'nom'
                                                    | nom
                                                else if sort == 'statutOuvert'
                                                    | statut
                                                svg.-mr-1.ml-2.h-5.w-5(fill="currentColor" viewbox="0 0 20 20")
                                                    path(fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd")
                                    .origin-top-right.absolute.right-0.mt-2.w-56.rounded-md.shadow-lg(x-show="open" x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95")
                                        .rounded-md.bg-white.shadow-xs
                                            .py-1
                                                a.block.px-4.py-2.text-sm.leading-5.text-gray-700(href="?page=#{page.getNumber()}&sort=id&dir=#{dir}&keyword=#{keyword}" class="hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900") Id
                                                a.block.px-4.py-2.text-sm.leading-5.text-gray-700(href="?page=#{page.getNumber()}&sort=nom&dir=#{dir}&keyword=#{keyword}" class="hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900") Nom
                                                a.block.px-4.py-2.text-sm.leading-5.text-gray-700(href="?page=#{page.getNumber()}&sort=statutOuvert&dir=#{dir}&keyword=#{keyword}" class="hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900") Statut
                                
                                
                                .relative.inline-block.text-left.ml-3(x-data="{ open: false }" @keydown.window.escape="open = false" @click.away="open = false")
                                    div
                                        span.rounded-md.shadow-sm
                                            button.inline-flex.justify-center.w-full.rounded-md.border.border-gray-300.px-4.py-2.bg-white.text-sm.leading-5.font-medium.text-gray-700.transition.ease-in-out.duration-150(@click="open = !open" type="button" class="hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800")
                                                | #{dir == 'desc' ? 'Décroissant' : 'Croissant'}
                                                svg.-mr-1.ml-2.h-5.w-5(fill="currentColor" viewbox="0 0 20 20")
                                                    path(fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd")                                                    
                                    .origin-top-right.absolute.right-0.mt-2.w-56.rounded-md.shadow-lg(x-show="open" x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95")
                                        .rounded-md.bg-white.shadow-xs
                                            .py-1
                                                a.block.px-4.py-2.text-sm.leading-5.text-gray-700(href="?page=#{page.getNumber()}&sort=#{sort}&dir=asc&keyword=#{keyword}" class="hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900") Croissant
                                                a.block.px-4.py-2.text-sm.leading-5.text-gray-700(href="?page=#{page.getNumber()}&sort=#{sort}&dir=desc&keyword=#{keyword}" class="hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900") Décroissant
                                div.ml-3
                                    form(action="", method="GET")
                                        .flex.rounded-md.shadow-sm
                                            .relative.flex-grow(class="focus-within:z-10")
                                                input#email.form-input.block.rounded-none.rounded-l-md.transition.ease-in-out.duration-150.w-36(class="sm:text-sm sm:leading-5" placeholder="Rechercher" name="keyword", value="#{keyword}")
                                            button.-ml-px.relative.inline-flex.items-center.px-4.py-2.border.border-gray-300.text-sm.leading-5.font-medium.rounded-r-md.text-gray-700.bg-gray-50.transition.ease-in-out.duration-150(class="hover:text-gray-500 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 active:text-gray-700")
                                                | Go
                    table.min-w-full
                        thead
                            tr
                                th.px-6.py-3.border-b.border-gray-200.bg-gray-50.text-left.text-xs.leading-4.font-medium.text-gray-500.uppercase.tracking-wider
                                    | ID
                                th.px-6.py-3.border-b.border-gray-200.bg-gray-50.text-left.text-xs.leading-4.font-medium.text-gray-500.uppercase.tracking-wider
                                    | Nom
                                th.px-6.py-3.border-b.border-gray-200.bg-gray-50.text-left.text-xs.leading-4.font-medium.text-gray-500.uppercase.tracking-wider
                                    | Commentaire
                                th.px-6.py-3.border-b.border-gray-200.bg-gray-50.text-left.text-xs.leading-4.font-medium.text-gray-500.uppercase.tracking-wider
                                    | Statut
                                th.px-6.py-3.border-b.border-gray-200.bg-gray-50
                        tbody
                            each relais, index in relaisListe
                                tr(class=index % 2 == 0 ? 'bg-white' : 'bg-gray-50')
                                    td.px-6.py-4.whitespace-no-wrap.text-sm.leading-5.text-gray-500
                                        | #{relais.id}
                                    td.px-6.py-4.text-sm.leading-5.font-medium.text-gray-900
                                        | #{relais.nom}
                                    td.px-6.py-4.text-sm.leading-5.font-medium.text-gray-900
                                        | #{relais.com}
                                    td.px-6.py-4.whitespace-no-wrap.text-sm.leading-5.text-gray-500
                                        if relais.statutOuvert
                                            .inline-flex.items-center.rounded-md.text-sm.font-medium.leading-5.bg-green-100.text-green-800(class="px-2.5 py-0.5")
                                                | Ouvert
                                        else
                                            .inline-flex.items-center.rounded-md.text-sm.font-medium.leading-5.bg-red-100.text-red-800(class="px-2.5 py-0.5")
                                                | Fermé
                                    td.px-6.py-4.whitespace-no-wrap.text-right.text-sm.leading-5.font-medium
                                        a.text-indigo-600(href='/relais/#{relais.id}' class="hover:text-indigo-900 focus:outline-none focus:underline") Modifier
                    .bg-white.px-4.py-3.flex.items-center.justify-between.border-t.border-gray-200(class="sm:px-6")
                        .hidden(class="sm:flex-1 sm:flex sm:items-center sm:justify-between")
                            div
                                p.text-sm.leading-5.text-gray-700
                                    | Lignes &nbsp;
                                    span.font-medium #{firstIndex}
                                    |         à&nbsp;
                                    span.font-medium #{lastIndex}
                                    |         de&nbsp;
                                    span.font-medium #{page.getTotalElements()}
                                    |         résultats
                        .flex-1.flex.justify-between(class="sm:justify-end")
                            a.relative.inline-flex.items-center.px-4.py-2.border.border-gray-300.text-sm.leading-5.font-medium.rounded-md.text-gray-700.bg-white.transition.ease-in-out.duration-150(href='?page=0&sort=#{sort}&dir=#{dir}&keyword=#{keyword}' class="hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 active:text-gray-700")
                                | &lt;&lt;&nbsp;Première
                            a.ml-3.relative.inline-flex.items-center.px-4.py-2.border.border-gray-300.text-sm.leading-5.font-medium.rounded-md.text-gray-700.bg-white.transition.ease-in-out.duration-150(href='?page=#{previousPage}&sort=#{sort}&dir=#{dir}&keyword=#{keyword}' c class="hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 active:text-gray-700")
                                | Précédent
                            a.ml-3.relative.inline-flex.items-center.px-4.py-2.border.border-gray-300.text-sm.leading-5.font-medium.rounded-md.text-gray-700.bg-white.transition.ease-in-out.duration-150(href='?page=#{nextPage}&sort=#{sort}&dir=#{dir}&keyword=#{keyword}' c class="hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 active:text-gray-700")
                                | Suivant    
                            a.ml-3.relative.inline-flex.items-center.px-4.py-2.border.border-gray-300.text-sm.leading-5.font-medium.rounded-md.text-gray-700.bg-white.transition.ease-in-out.duration-150(href='?page=#{lastPage}&sort=#{sort}&dir=#{dir}&keyword=#{keyword}' c class="hover:text-gray-500 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 active:text-gray-700")
                                | Dernière&nbsp;&gt;&gt;
        .flex-col.ml-5.max-w-sm
            .bg-white.shadow(class="sm:rounded-lg")
                .px-4.py-5(class="sm:p-6")
                    h3.text-lg.leading-6.font-medium.text-gray-900
                        | Export
                    .mt-2.max-w-xl.text-sm.leading-5.text-gray-500
                        p Exporter les données au format GeoJSON ou CSV
                    .mt-5
                        span.shadow-sm.rounded-md
                            a.inline-flex.items-center.px-3.py-2.border.border-transparent.text-sm.leading-5.font-medium.rounded-md.text-indigo-700.bg-indigo-100.transition.ease-in-out.duration-150(href="/api/relais/geojson" target="_blank" class="hover:bg-indigo-50 focus:outline-none focus:border-indigo-300 focus:shadow-outline-indigo active:bg-indigo-200")
                                | GeoJSON
                        span.shadow-sm.rounded-md.ml-3
                            a.inline-flex.items-center.px-3.py-2.border.border-transparent.text-sm.leading-5.font-medium.rounded-md.text-indigo-700.bg-indigo-100.transition.ease-in-out.duration-150(href="/api/relais/csv" target="_blank" class="hover:bg-indigo-50 focus:outline-none focus:border-indigo-300 focus:shadow-outline-indigo active:bg-indigo-200")
                                | CSV
            .mt-5.bg-white.shadow(class="sm:rounded-lg")
                form(action="/relais/import" method="POST" enctype="multipart/form-data")
                    .px-4.py-5(class="sm:p-6")
                        h3.text-lg.leading-6.font-medium.text-gray-900
                            | Import
                        .mt-2.max-w-xl.text-sm.leading-5.text-gray-500
                            p Importer les données au format CSV
                        .mt-3
                            input.inline-flex.items-center.px-3.py-2.border.border-transparent.text-sm.leading-5(type="file" name="file" class="hover:bg-indigo-50 focus:outline-none focus:border-indigo-300 focus:shadow-outline-indigo active:bg-indigo-200")
                        .mt-3
                            span.shadow-sm.rounded-md
                                button.inline-flex.items-center.px-4.py-2.border.border-transparent.text-sm.leading-5.font-medium.rounded-md.text-white.bg-indigo-600.transition.duration-150.ease-in-out(type="submit" class="hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-700 active:bg-indigo-700")
                                    | Importer
            
            .mt-5.bg-white.shadow(class="sm:rounded-lg")
                .px-4.py-5(class="sm:p-6")
                    h3.text-lg.leading-6.font-medium.text-gray-900
                        | Ajout
                    .mt-2.max-w-xl.text-sm.leading-5.text-gray-500
                        p Créer un nouveau relais
                    .mt-5
                        span.shadow-sm.rounded-md
                            a.inline-flex.items-center.px-4.py-2.border.border-transparent.text-sm.leading-5.font-medium.rounded-md.text-white.bg-indigo-600.transition.duration-150.ease-in-out(href="/relais/new" class="hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-700 active:bg-indigo-700")
                                | Nouveau